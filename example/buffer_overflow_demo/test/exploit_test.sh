#!/bin/bash

# Test script for buffer overflow vulnerability
echo "Building vulnerable program..."
cd "$(dirname "$0")/.." && make

echo -e "\n=== Running with safe input ==="
./vulnerable "Safe Input"

echo -e "\n=== Running with buffer overflow exploit ==="
./vulnerable "$(python -c 'print("A" * 50)')"

echo -e "\n=== Building with Address Sanitizer ==="
cd "$(dirname "$0")/.." && make asan

echo -e "\n=== Running with Address Sanitizer to detect the overflow ==="
./vulnerable_asan "$(python -c 'print("A" * 50)')"